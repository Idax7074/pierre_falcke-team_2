---
import PierreFalcke from "./PierreFalcke.astro";
---

<div class="scrubbercontainer">
  <article class="herocontainer">
    <h1>Pierre</h1>
    <PierreFalcke />
  </article>
  <video controls autoplay muted loop>
    <source src="video/eksperimentel-video_2.mp4" type="video/mp4" />
  </video>
  <div class="textcontainer">
    <p class="center">“Nu kan jeg leve livet igen. Jeg føler mig frisk. Jeg føler mig fri. Jeg føler mig genfødt.”</p>
  </div>
</div>

<style>
  .scrubbercontainer {
    position: relative;
    text-align: center;
    background-color: black;
  }

  .center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -170%);

    font-family: "PlainItalic", sans-serif;
    text-transform: uppercase;
    font-weight: 800;
    color: var(--white);
    font-size: 4rem;
  }

  .text {
    animation: puff-in-top 1.2s cubic-bezier(0.47, 0, 0.745, 0.715) both;
  }

  @keyframes puff-in-top {
    0% {
      transform: scale(2);
      transform-origin: 50% 0;
      filter: blur(4px);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      transform-origin: 50% 0;
      filter: blur(0);
      opacity: 1;
    }
  }
  article {
    background-color: var(--black);
    height: 900px;

    /* animation: fade-out 4s ease-out both; */
  }

  @keyframes fade-out {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
  @media (max-width: 820px) {
    article {
      height: 700px;
    }
  }

  @media (max-width: 390px) {
    article {
      height: 300px;
    }
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".herocontainer", {
    scrollTrigger: {
      scrub: true,
      trigger: ".scrubbercontainer",
      start: "top top",
      end: "bottom bottom",
    },
    opacity: 0,
    y: -200,
  });

  gsap.from(".scrubbercontainer video", {
    scrollTrigger: {
      scrub: true,
      trigger: ".scrubbercontainer",
      start: "center center",
      end: "bottom bottom",
    },
    opacity: 0,
    y: -200,
  });

  gsap.from(".textcontainer", {
    scrollTrigger: {
      scrub: true,
      trigger: ".scrubbercontainer",
      start: "1000 center",
      end: "bottom bottom",
    },
    opacity: 0,
    y: -50,
  });

  // gsap.from(".textcontainer", {
  //   scrollTrigger: {
  //     scrub: true,
  //     trigger: ".scrubbercontainer",
  //     start: "center center",
  //     end: "bottom bottom",
  //     toggleClass: "text",
  //     markers: true,
  //   },
  // });
</script>
